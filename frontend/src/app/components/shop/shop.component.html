<div class="shop-container" *ngIf="user">
    <div class="shop-header">
        <h1>Tienda</h1>
        <div class="user-balance">
            <span class="coins-amount">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="200" height="200">
                    <circle cx="50" cy="50" r="48" fill="#D4AF37" />
                    <circle cx="50" cy="50" r="42" fill="#F7D54A" stroke="#B8860B" stroke-width="2"/>
                    <path d="M56 25 L40 52 L52 52 L44 82 L68 45 L54 45 Z" fill="#996515" />
                </svg>
                {{ user.coins }}
            </span>
        </div>
    </div>

    <div class="shop-grid">
        <!-- Avatar Section -->
        <div class="shop-item avatar-shop">
            <h2>Personaliza tu Avatar</h2>
            <p class="description">Â¡Destaca con un nuevo look! Genera avatares Ãºnicos y compra tu favorito.</p>

            <div class="avatar-preview-area">
                <div class="current-avatar">
                    <span>Actual</span>
                    <img [src]="'https://api.dicebear.com/7.x/avataaars/svg?seed=' + (user.avatar_seed || user.username)"
                        alt="Current Avatar">
                </div>
                <div class="arrow">âžœ</div>
                <div class="new-avatar">
                    <span>Nuevo</span>
                    <img [src]="'https://api.dicebear.com/7.x/avataaars/svg?seed=' + previewSeed"
                        alt="New Avatar Preview">
                </div>
            </div>

            <div class="actions">
                <button (click)="randomizeAvatar()" class="btn-random">
                    <i class="fas fa-dice"></i> Generar Nuevo
                </button>

                <button (click)="buyAvatar()" [disabled]="user.coins < avatarCost || isLoadingAvatar" class="btn-buy">
                    {{ isLoadingAvatar ? 'Comprando...' : 'Comprar por ' + avatarCost + ' ðŸª™' }}
                </button>
            </div>

            <div *ngIf="avatarErrorMsg" class="msg error">{{ avatarErrorMsg }}</div>
            <div *ngIf="avatarSuccessMsg" class="msg success">{{ avatarSuccessMsg }}</div>
        </div>

        <!-- Future Items Placeholders -->
        <div class="shop-item coming-soon">
            <h2>Pociones de Vida</h2>
            <p>Proximamente...</p>
        </div>
        <div class="shop-item coming-soon">
            <h2>Congelar Racha</h2>
            <p>Proximamente...</p>
        </div>
    </div>
</div>