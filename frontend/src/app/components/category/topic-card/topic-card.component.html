<div class="topic-card" [ngClass]="{'locked': topic.status === 'locked'}">
    <div class="card-header">
        <div class="icon-badge" [ngClass]="{
      'green': topic.status === 'in-progress',
      'gray': topic.status !== 'in-progress'
    }">
            <ng-container [ngSwitch]="topic.status">
                <svg *ngSwitchCase="'locked'" viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <path d="M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-9v2H6V8a6 6 0 1 1 12 0zM8 8h8V6a4 4 0 1 0-8 0v2z" />
                </svg>
                <svg *ngSwitchDefault viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    class="icon">
                    <path *ngIf="topic.icon === 'clock'"
                        d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" />
                    <polyline *ngIf="topic.icon === 'clock'" points="12 6 12 12 16 14"></polyline>

                    <path *ngIf="topic.icon === 'branch'" d="M6 3v12"></path>
                    <circle *ngIf="topic.icon === 'branch'" cx="18" cy="6" r="3"></circle>
                    <circle *ngIf="topic.icon === 'branch'" cx="6" cy="18" r="3"></circle>
                    <path *ngIf="topic.icon === 'branch'" d="M18 9a9 9 0 0 1-9 9"></path>

                    <path *ngIf="topic.icon === 'arrows'" d="M8 7l9 9m0 0l-5-5m5 5l-5 5"></path>
                    <path *ngIf="topic.icon === 'arrows'" d="M16 17l-9-9m0 0l5 5m-5-5l5-5"></path>

                    <path *ngIf="topic.icon === 'speech'"
                        d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                    </path>

                    <path *ngIf="topic.icon === 'brain'"
                        d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z">
                    </path>
                    <path *ngIf="topic.icon === 'brain'"
                        d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z">
                    </path>
                </svg>
            </ng-container>
        </div>
        <span class="status-badge" *ngIf="topic.status === 'in-progress'">EN PROGRESO</span>
        <span class="status-badge locked-badge" *ngIf="topic.status === 'locked'">BLOQUEADO</span>
    </div>

    <div class="card-content">
        <h3>{{ topic.title }}</h3>
        <p>{{ topic.description }}</p>
    </div>

    <div class="card-footer">
        <div class="progress-section" *ngIf="topic.status === 'in-progress'">
            <div class="progress-labels">
                <span>Progreso</span>
                <span>{{ topic.progress }}%</span>
            </div>
            <div class="progress-bar-bg">
                <div class="progress-bar-fill" [style.width.%]="topic.progress"></div>
            </div>
        </div>

        <button class="action-btn" (click)="onStart()" [ngClass]="{
        'btn-primary': topic.status === 'in-progress',
        'btn-outline': topic.status !== 'in-progress' && topic.status !== 'locked',
        'btn-locked': topic.status === 'locked'
    }">
            <span *ngIf="topic.status === 'in-progress'">Continuar</span>
            <span *ngIf="topic.status === 'not-started'">Empezar</span>
            <span *ngIf="topic.status === 'locked'">Bloqueado</span>

            <svg *ngIf="topic.status !== 'locked'" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" class="arrow-icon">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
            <svg *ngIf="topic.status === 'locked'" viewBox="0 0 24 24" fill="currentColor" class="lock-icon-btn">
                <path d="M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-9v2H6V8a6 6 0 1 1 12 0zM8 8h8V6a4 4 0 1 0-8 0v2z" />
            </svg>
        </button>
    </div>
</div>