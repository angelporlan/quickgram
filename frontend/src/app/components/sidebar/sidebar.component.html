<aside class="sidebar">
    <div class="brand">
        <div class="brand-icon">B2</div>
        <span class="brand-name">English Prep</span>
    </div>

    <nav class="nav-links">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            Dashboard
        </a>

        <a routerLink="/roles" routerLinkActive="active" class="nav-item premium">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9L12 2Z"></path>
                <path d="M19 18L20 20L22 21L20 22L19 24L18 22L16 21L18 20L19 18Z"></path>
            </svg>
            Premium
        </a>

        <a routerLink="/categories" routerLinkActive="active" class="nav-item">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            CategorÃ­as
        </a>

        <a routerLink="/attempts" routerLinkActive="active" class="nav-item">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            </svg>
            Mis Intentos
        </a>

        <a routerLink="/shop" routerLinkActive="active" class="nav-item">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            Tienda
        </a>

        <div class="nav-section mt-auto">
            <div class="daily-goal-box" routerLink="/streak" routerLinkActive="active" style="cursor: pointer;">
                <div class="goal-header">
                    <span>Meta Diaria</span>
                    <span class="goal-percent">{{ percentage }}%</span>
                </div>
                <div class="goal-bar-bg">
                    <div class="goal-bar-fill" [style.width.%]="percentage"></div>
                </div>
                <p class="goal-text">
                    {{ numberOfAttempts }}/{{ dailyGoal }} ejercicios completados
                    <span *ngIf="percentage >= 100">ðŸŽ‰</span>
                </p>
                <p class="goal-text" style="margin-top: 8px; display: flex; align-items: center;">
                    <img src="../svg/flame.svg" width="16" height="16" alt="flame" style="margin-right: 4px;">
                    Racha: {{ streak }} dÃ­a<span *ngIf="streak !== 1">s</span>
                </p>
            </div>
        </div>
    </nav>

    <div class="user-profile" routerLink="/user" routerLinkActive="active" *ngIf="user">
        <div class="avatar">
            <img [src]="'https://api.dicebear.com/7.x/avataaars/svg?seed=' + (user.avatar_seed || user.username)"
                alt="Avatar">
        </div>
        <div class="user-info">
            <div class="user-name">{{ user.name }}</div>
            <div class="user-plan">
                {{ user.subscription_role | uppercase }}
                <span class="user-coins" title="Monedas disponibles">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="16" height="16">
                        <circle cx="50" cy="50" r="48" fill="#D4AF37" />
                        <circle cx="50" cy="50" r="42" fill="#F7D54A" stroke="#B8860B" stroke-width="2" />

                        <path d="M56 25 L40 52 L52 52 L44 82 L68 45 L54 45 Z" fill="#996515" />
                    </svg>
                    {{ user.coins || 0 }}
                </span>
            </div>
        </div>
        <button class="logout-mini" (click)="logout()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        </button>
    </div>
</aside>