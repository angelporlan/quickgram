<div class="card ia-card">
    <div class="card-top">
        <div class="header-left">
            <div class="icon-circle purple">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z">
                    </path>
                </svg>
            </div>
            <div class="card-info">
                <h3>IA Tutor</h3>
                <p>Explicaciones detalladas</p>
            </div>
        </div>
        <span class="badge" *ngIf="stats">{{ stats.effective_role | uppercase }}</span>
    </div>

    <div class="usage-stats" *ngIf="stats">
        <div class="usage-numbers">
            <div class="numbers-group">
                <span class="big-num">{{ stats.used }}</span><span class="total"> /{{ stats.limit }}</span>
            </div>
            <span class="usage-percent">{{ usagePercent }}% Usado (día)</span>
        </div>
        <div class="progress-bar-bg">
            <div class="progress-bar-fill" [style.width.%]="usagePercent"></div>
        </div>
        <p class="usage-note" *ngIf="showRenewalInfo">Próxima renovación el {{ stats.expiration_date |
            date:'dd/MM/yyyy' }}.
        </p>
    </div>

    <div class="loading-state" *ngIf="!stats">
        <p>Cargando estadísticas...</p>
    </div>

    <button routerLink="/roles" class="outline-button">Obtener más</button>
</div>