<div class="roles-container">
    <div class="roles-header">
        <h1>Elige tu Plan</h1>
        <p>Selecciona el plan que mejor se adapte a tus necesidades</p>
    </div>

    <div *ngIf="loading" class="loading">Cargando...</div>

    <div *ngIf="!loading" class="pricing-grid">
        <div *ngFor="let plan of plans" class="pricing-card" [ngClass]="{
           'current': plan.current,
           'recommended': plan.recommended,
           'premium-plan': plan.id === 'premium'
         }">

            <!-- Recommended Badge -->
            <div *ngIf="plan.recommended" class="recommended-badge">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9L12 2Z"></path>
                </svg>
                Recomendado
            </div>

            <!-- Current Plan Badge -->
            <div *ngIf="plan.current" class="current-badge">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
                Plan Actual
            </div>

            <div class="plan-header">
                <h2>{{ plan.name }}</h2>
                <div class="price">
                    <span class="amount">{{ plan.price }}</span>
                    <span class="period" *ngIf="plan.id !== 'free'">/mes</span>
                </div>
            </div>

            <div class="ai-limit">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9L12 2Z"></path>
                    <path d="M19 18L20 20L22 21L20 22L19 24L18 22L16 21L18 20L19 18Z"></path>
                </svg>
                <span>{{ plan.aiLimit }} consultas IA/d√≠a</span>
            </div>

            <ul class="features-list">
                <li *ngFor="let feature of plan.features">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    {{ feature }}
                </li>
            </ul>

            <button class="select-button" [disabled]="plan.current" (click)="selectPlan(plan.id)">
                <span *ngIf="plan.current">Plan Actual</span>
                <span *ngIf="!plan.current && plan.id === 'free'">Cambiar a Free</span>
                <span *ngIf="!plan.current && plan.id !== 'free'">Seleccionar Plan</span>
            </button>
        </div>
    </div>
</div>